{% extends 'layout.html' %}
{% block body %}
<style>
  #id {
    text-align: center;
  }

  .left-content {
    border-right: 1px dashed #333;
  }

  .flex-container{
    display: flex;
    flex-flow: wrap;
    margin: 0 -5px;
    justify-content: center;
    align-items: center;
  }

  .flex-container>* {
    flex: 0 0 33.3333%;
  }

  .allpics {
    width: 18em;
    height: auto;
    margin: 5px 5px 5px 5px;
  }

  a.button {
    -webkit-appearance: button;
    -moz-appearance: button;
    appearance: button;
    text-decoration: none;
    color: initial;
    position:absolute;
    top:50px; right:100px;
    font: bold 11px Arial;
    background-color: #EEEEEE;
    color: #333333;
    padding: 2px 6px 2px 6px;
    border-top: 1px solid #CCCCCC;
    border-right: 1px solid #333333;
    border-bottom: 1px solid #333333;
    border-left: 1px solid #CCCCCC;
  }
  .zoom {
    transition: transform .2s; /* Animation */
  }
  .zoom:hover {
    transform: scale(1.1); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
  }

  /* below is for google JS maps */
  /* Always set the map height explicitly to define the size of the div
   * element that contains the map. */
  #map {
    height: 30rem;
    width: 100%;
  }
</style>
<h1>Profile Page</h1>
<hr/>
<div id="container">
  <div class ="row text-center" id="profile_img">
    <img id="avatar" src="{{ avatar }}" alt="Avatar" style="border-radius: 50%; height: 20em;">
    <h1 id="name" class="text-center">{{ uname }}</h1>

  </div>

  <div id="map"></div>
  <script>


  // https://developers.google.com/maps/documentation/javascript/marker-clustering
    function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 1.5,
        center: {lat: 51.5, lng: -12}
      });

      // Create an array of alphabetical characters used to label the markers.
      var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

      // Add some markers to the map.
      // Note: The code uses the JavaScript Array.prototype.map() method to
      // create an array of markers based on a given "locations" array.
      // The map() method here has nothing to do with the Google Maps API.
      var markers = locations.map(function(location, i) {
        return new google.maps.Marker({
          position: location,
          label: labels[i % labels.length]
        });
      });

      // Add a marker clusterer to manage the markers.
      var markerCluster = new MarkerClusterer(map, markers,
          {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
    }
    const locations = [];
    {% for post in posts %}
      locations.push({lat: {{ post.lat }}, lng: {{ post.lng }}});
    {% endfor %}
    /*
    var locations = [
      {lat: -31.563910, lng: 147.154312},
      {lat: -33.718234, lng: 150.363181},
      {lat: -33.727111, lng: 150.371124},
      {lat: -33.848588, lng: 151.209834},
      {lat: -33.851702, lng: 151.216968},
      {lat: -34.671264, lng: 150.863657},
      {lat: -35.304724, lng: 148.662905},
      {lat: -36.817685, lng: 175.699196},
      {lat: -36.828611, lng: 175.790222},
      {lat: -37.750000, lng: 145.116667},
      {lat: -37.759859, lng: 145.128708},
      {lat: -37.765015, lng: 145.133858},
      {lat: -37.770104, lng: 145.143299},
      {lat: -37.773700, lng: 145.145187},
      {lat: -37.774785, lng: 145.137978},
      {lat: -37.819616, lng: 144.968119},
      {lat: -38.330766, lng: 144.695692},
      {lat: -39.927193, lng: 175.053218},
      {lat: -41.330162, lng: 174.865694},
      {lat: -42.734358, lng: 147.439506},
      {lat: -42.734358, lng: 147.501315},
      {lat: -42.735258, lng: 147.438000},
      {lat: -43.999792, lng: 170.463352}
    ]
    */
  </script>
  <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
  </script>
  <script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCVbLzMoJnKWQivsE9l2UGIat8XbA0QmW0&callback=initMap&language=en">
  </script>

  <div id="profile_content">
    <div class="row">
      <div class="col-6 text-center left-content">
        <h2> Posts </h2>
        <div class="gallery">
          <br>
          <br>
          <div id="pics" class="flex-container text-center">
            {% for post in posts %}
              <div class="zoom"><a class="alllinks" href="/post/{{post.pid}}"><img class="allpics" src="{{post.img}}"/></a></div>
            {% endfor %}
          </div>
        </div>
      </div>
      <div class="col-6 text-center">
        <h2> Pinned </h2>
        <div class=" gallery">
          <br>
          <br>
          <div id="pics" class="flex-container text-center">
            {% for pin in pinned %}
              <div class="zoom"><a class="alllinks" href="/post/{{pin.pid}}"><img class="allpics" src="{{pin.img}}"/></a></div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
</div>
{% endblock %}
